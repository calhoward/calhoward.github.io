<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="Seamless Function Key Switching for iTerm2 with Karabiner-Elements and Hammerspoon" /><meta property="og:locale" content="en" /><meta name="description" content="Photo credit - Markus Spiske" /><meta property="og:description" content="Photo credit - Markus Spiske" /><link rel="canonical" href="https://calhoward.com/posts/Function-Key-Switching-for-iTerm2/" /><meta property="og:url" content="https://calhoward.com/posts/Function-Key-Switching-for-iTerm2/" /><meta property="og:site_name" content="Cal Howard" /><meta property="og:image" content="https://calhoward.com/assets/img/2024/pexels-markusspiske-177598-min.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-09-08T13:54:00-04:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://calhoward.com/assets/img/2024/pexels-markusspiske-177598-min.jpg" /><meta property="twitter:title" content="Seamless Function Key Switching for iTerm2 with Karabiner-Elements and Hammerspoon" /><meta name="twitter:site" content="@calhoward" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-09-08T14:37:55-04:00","datePublished":"2024-09-08T13:54:00-04:00","description":"Photo credit - Markus Spiske","headline":"Seamless Function Key Switching for iTerm2 with Karabiner-Elements and Hammerspoon","image":"https://calhoward.com/assets/img/2024/pexels-markusspiske-177598-min.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://calhoward.com/posts/Function-Key-Switching-for-iTerm2/"},"url":"https://calhoward.com/posts/Function-Key-Switching-for-iTerm2/"}</script><title>Seamless Function Key Switching for iTerm2 with Karabiner-Elements and Hammerspoon | Cal Howard</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Cal Howard"><meta name="application-name" content="Cal Howard"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/23180321?v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Cal Howard</a></div><div class="site-subtitle font-italic">Chronicling my discoveries in the tech world</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/calhoward" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/calhoward" aria-label="twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['cal','calhoward.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Seamless Function Key Switching for iTerm2 with Karabiner-Elements and Hammerspoon</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Seamless Function Key Switching for iTerm2 with Karabiner-Elements and Hammerspoon</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1725818040" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 8, 2024 </em> </span> <span> Updated <em class="" data-ts="1725820675" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 8, 2024 </em> </span><div class="mt-3 mb-3"> <a href="https://calhoward.com/assets/img/2024/pexels-markusspiske-177598-min.jpg" class="popup img-link preview-img shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 630'%3E%3C/svg%3E" data-src="https://calhoward.com/assets/img/2024/pexels-markusspiske-177598-min.jpg" alt="Preview Image" width="1200" height="630" class="lazyload" data-proofer-ignore></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/calhoward">Cal Howard</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1516 words"> <em>8 min</em> read</span></div></div></div><div class="post-content"><p><em>Photo credit - <a href="https://www.pexels.com/@markusspiske/">Markus Spiske</a></em></p><h2 id="effortless-function-key-toggling-for-terminal-and-system-tasks"><span class="mr-2">Effortless Function Key Toggling for Terminal and System Tasks</span><a href="#effortless-function-key-toggling-for-terminal-and-system-tasks" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>For developers who spend time in the terminal, especially on macOS, function keys are crucial. Switching between system tasks like adjusting brightness or volume and terminal work can be frustrating if function keys aren’t responsive.</p><p>This guide shows you how to achieve seamless function key toggling on macOS using <a href="https://iterm2.com/">iTerm2</a>, <a href="https://karabiner-elements.pqrs.org/">Karabiner-Elements</a>, and <a href="https://www.hammerspoon.org/">Hammerspoon</a>. With this setup, function keys automatically switch to <code class="language-plaintext highlighter-rouge">F1</code>-<code class="language-plaintext highlighter-rouge">F12</code> in iTerm2 and revert to their default macOS behavior when you switch to other apps, creating a smooth, lag-free experience.</p><h2 id="why-this-setup-is-a-game-changer"><span class="mr-2">Why This Setup is a Game-Changer</span><a href="#why-this-setup-is-a-game-changer" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Before we dive into the technical setup, let’s appreciate the simplicity and beauty of this approach:</p><ul><li><strong>Instant Switching</strong>: Function keys change instantly as you switch between iTerm2 and other apps– no delay.<li><strong>No Manual Toggle</strong>: The transition happens automatically in the background.<li><strong>Terminal-Specific Functionality</strong>: Perfect for terminal users needing <code class="language-plaintext highlighter-rouge">F1</code>-<code class="language-plaintext highlighter-rouge">F12</code> without losing macOS functionality in other apps.</ul><p>Now, let’s set it up!</p><h2 id="install-karabiner-elements"><span class="mr-2">Install Karabiner-Elements</span><a href="#install-karabiner-elements" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>If you don’t already have it, Karabiner-Elements is an essential tool for remapping keys on macOS. It’s highly customizable and will allow us to create profiles for different applications.</p><p>Download and install Karabiner-Elements from <a href="https://karabiner-elements.pqrs.org/">here</a>.</p><p>If you have <a href="https://brew.sh/">Homebrew</a> installed, you can use:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>brew <span class="nb">install </span>karabiner-elements
</pre></table></code></div></div><h2 id="install-hammerspoon"><span class="mr-2">Install Hammerspoon</span><a href="#install-hammerspoon" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Hammerspoon is another powerful macOS automation tool that lets us script actions based on window focus, among many other things.</p><p>Download and install Hammerspoon from <a href="https://www.hammerspoon.org/">here</a>.</p><p>Alternatively, Homebrew users may use:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>brew <span class="nb">install </span>hammerspoon
</pre></table></code></div></div><h2 id="configuring-karabiner-elements"><span class="mr-2">Configuring Karabiner-Elements</span><a href="#configuring-karabiner-elements" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Karabiner-Elements allows us to create different profiles depending on the focused application, in this case, iTerm2.</p><p>Open the Karabiner-Elements configuration file by navigating to <code class="language-plaintext highlighter-rouge">~/.config/karabiner/karabiner.json</code>.</p><p>Replace the contents of <code class="language-plaintext highlighter-rouge">karabiner.json</code> with the following:</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"profiles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"fn_function_keys"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f1"</span><span class="w"> </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"display_brightness_decrement"</span><span class="w"> </span><span class="p">}]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f2"</span><span class="w"> </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"display_brightness_increment"</span><span class="w"> </span><span class="p">}]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f3"</span><span class="w"> </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mission_control"</span><span class="w"> </span><span class="p">}]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f4"</span><span class="w"> </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"launchpad"</span><span class="w"> </span><span class="p">}]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f5"</span><span class="w"> </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"illumination_decrement"</span><span class="w"> </span><span class="p">}]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f6"</span><span class="w"> </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"illumination_increment"</span><span class="w"> </span><span class="p">}]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f7"</span><span class="w"> </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rewind"</span><span class="w"> </span><span class="p">}]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f8"</span><span class="w"> </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"play_or_pause"</span><span class="w"> </span><span class="p">}]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f9"</span><span class="w"> </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fastforward"</span><span class="w"> </span><span class="p">}]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f10"</span><span class="w"> </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mute"</span><span class="w"> </span><span class="p">}]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f11"</span><span class="w"> </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"volume_decrement"</span><span class="w"> </span><span class="p">}]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f12"</span><span class="w"> </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"volume_increment"</span><span class="w"> </span><span class="p">}]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Default profile"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"selected"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"complex_modifications"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Map F1-F12 to function keys and allow modifiers in iTerm2"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"manipulators"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f1"</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"modifiers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"optional"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"any"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
                                </span><span class="p">},</span><span class="w">
                                </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f1"</span><span class="w"> </span><span class="p">}],</span><span class="w">
                                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic"</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f2"</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"modifiers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"optional"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"any"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
                                </span><span class="p">},</span><span class="w">
                                </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f2"</span><span class="w"> </span><span class="p">}],</span><span class="w">
                                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic"</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f3"</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"modifiers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"optional"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"any"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
                                </span><span class="p">},</span><span class="w">
                                </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f3"</span><span class="w"> </span><span class="p">}],</span><span class="w">
                                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic"</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f4"</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"modifiers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"optional"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"any"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
                                </span><span class="p">},</span><span class="w">
                                </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f4"</span><span class="w"> </span><span class="p">}],</span><span class="w">
                                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic"</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f5"</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"modifiers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"optional"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"any"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
                                </span><span class="p">},</span><span class="w">
                                </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f5"</span><span class="w"> </span><span class="p">}],</span><span class="w">
                                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic"</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f6"</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"modifiers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"optional"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"any"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
                                </span><span class="p">},</span><span class="w">
                                </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f6"</span><span class="w"> </span><span class="p">}],</span><span class="w">
                                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic"</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f7"</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"modifiers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"optional"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"any"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
                                </span><span class="p">},</span><span class="w">
                                </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f7"</span><span class="w"> </span><span class="p">}],</span><span class="w">
                                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic"</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f8"</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"modifiers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"optional"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"any"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
                                </span><span class="p">},</span><span class="w">
                                </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f8"</span><span class="w"> </span><span class="p">}],</span><span class="w">
                                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic"</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f9"</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"modifiers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"optional"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"any"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
                                </span><span class="p">},</span><span class="w">
                                </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f9"</span><span class="w"> </span><span class="p">}],</span><span class="w">
                                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic"</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f10"</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"modifiers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"optional"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"any"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
                                </span><span class="p">},</span><span class="w">
                                </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f10"</span><span class="w"> </span><span class="p">}],</span><span class="w">
                                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic"</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f11"</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"modifiers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"optional"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"any"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
                                </span><span class="p">},</span><span class="w">
                                </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f11"</span><span class="w"> </span><span class="p">}],</span><span class="w">
                                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic"</span><span class="w">
                            </span><span class="p">},</span><span class="w">
                            </span><span class="p">{</span><span class="w">
                                </span><span class="nl">"from"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                                    </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f12"</span><span class="p">,</span><span class="w">
                                    </span><span class="nl">"modifiers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"optional"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"any"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
                                </span><span class="p">},</span><span class="w">
                                </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"> </span><span class="nl">"key_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f12"</span><span class="w"> </span><span class="p">}],</span><span class="w">
                                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"basic"</span><span class="w">
                            </span><span class="p">}</span><span class="w">
                        </span><span class="p">]</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"iTerm2"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>This setup creates two profiles: one for iTerm2 where the <code class="language-plaintext highlighter-rouge">F1</code>-<code class="language-plaintext highlighter-rouge">F12</code> keys behave like traditional function keys, and a default profile where they retain their macOS function key behavior (brightness, volume, etc.).</p><p>The profiles in the JSON file are structured as follows:</p><p><code class="language-plaintext highlighter-rouge">Default Profile</code>: Assigns the usual system functions (e.g., brightness, volume) to the function keys. <code class="language-plaintext highlighter-rouge">iTerm2 Profile</code>: Remaps the function keys to behave as standard function keys (<code class="language-plaintext highlighter-rouge">F1</code>-<code class="language-plaintext highlighter-rouge">F12</code>), ideal for use in iTerm2.</p><h2 id="setting-up-hammerspoon"><span class="mr-2">Setting up Hammerspoon</span><a href="#setting-up-hammerspoon" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>We’ll use Hammerspoon to detect when iTerm2 is in focus and switch to the appropriate profile in Karabiner-Elements.</p><p>Open the Hammerspoon configuration file by navigating to <code class="language-plaintext highlighter-rouge">~/.hammerspoon/init.lua</code>.</p><p>Replace the contents of <code class="language-plaintext highlighter-rouge">init.lua</code> with the following:</p><div class="language-lua highlighter-rouge"><div class="code-header"> <span data-label-text="Lua"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre><td class="rouge-code"><pre><span class="c1">-- Enable logging to track behavior in Console.app</span>
<span class="n">hs</span><span class="p">.</span><span class="n">logger</span><span class="p">.</span><span class="n">defaultLogLevel</span> <span class="o">=</span> <span class="s1">'info'</span>
<span class="kd">local</span> <span class="n">log</span> <span class="o">=</span> <span class="n">hs</span><span class="p">.</span><span class="n">logger</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="s1">'fnKeyLogger'</span><span class="p">,</span> <span class="s1">'info'</span><span class="p">)</span>

<span class="c1">-- Escaped path to Karabiner-Elements CLI (handle spaces in path)</span>
<span class="kd">local</span> <span class="n">karabinerCliPath</span> <span class="o">=</span> <span class="s2">"/Library/Application\\ Support/org.pqrs/Karabiner-Elements/bin/karabiner_cli"</span>

<span class="c1">-- Karabiner-Elements profile names</span>
<span class="kd">local</span> <span class="n">defaultProfile</span> <span class="o">=</span> <span class="s2">"Default profile"</span>
<span class="kd">local</span> <span class="n">iterm2Profile</span> <span class="o">=</span> <span class="s2">"iTerm2"</span>

<span class="c1">-- Function to switch Karabiner profiles</span>
<span class="kd">local</span> <span class="k">function</span> <span class="nf">switchKarabinerProfile</span><span class="p">(</span><span class="n">profileName</span><span class="p">)</span>
    <span class="c1">-- Construct the command to be run inside a shell</span>
    <span class="kd">local</span> <span class="n">command</span> <span class="o">=</span> <span class="nb">string.format</span><span class="p">(</span><span class="s2">"sh -c '%s --select-profile \"</span><span class="o">%</span><span class="n">s</span><span class="err">\</span><span class="s2">"'"</span><span class="p">,</span> <span class="n">karabinerCliPath</span><span class="p">,</span> <span class="n">profileName</span><span class="p">)</span>
    <span class="n">log</span><span class="p">.</span><span class="n">i</span><span class="p">(</span><span class="s2">"Executing command: "</span> <span class="o">..</span> <span class="n">command</span><span class="p">)</span>  <span class="c1">-- Log the command for debugging</span>
    <span class="kd">local</span> <span class="n">result</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">exitCode</span> <span class="o">=</span> <span class="n">hs</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>

    <span class="c1">-- Log success or failure</span>
    <span class="k">if</span> <span class="n">status</span> <span class="k">then</span>
        <span class="n">log</span><span class="p">.</span><span class="n">i</span><span class="p">(</span><span class="s2">"Successfully switched to profile: "</span> <span class="o">..</span> <span class="n">profileName</span><span class="p">)</span>
    <span class="k">else</span>
        <span class="n">log</span><span class="p">.</span><span class="n">e</span><span class="p">(</span><span class="s2">"Error switching Karabiner profile. Output: "</span> <span class="o">..</span> <span class="n">result</span> <span class="o">..</span> <span class="s2">" Exit Code: "</span> <span class="o">..</span> <span class="nb">tostring</span><span class="p">(</span><span class="n">exitCode</span><span class="p">))</span>
    <span class="k">end</span>
<span class="k">end</span>

<span class="c1">-- Function to switch to function key profile when iTerm2 is focused</span>
<span class="kd">local</span> <span class="k">function</span> <span class="nf">enableFunctionKeys</span><span class="p">()</span>
    <span class="n">log</span><span class="p">.</span><span class="n">i</span><span class="p">(</span><span class="s2">"iTerm2 focused: Enabling function key profile."</span><span class="p">)</span>
    <span class="n">switchKarabinerProfile</span><span class="p">(</span><span class="n">iterm2Profile</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1">-- Function to switch to media key profile when iTerm2 is not focused</span>
<span class="kd">local</span> <span class="k">function</span> <span class="nf">disableFunctionKeys</span><span class="p">()</span>
    <span class="n">log</span><span class="p">.</span><span class="n">i</span><span class="p">(</span><span class="s2">"iTerm2 unfocused: Enabling media key profile."</span><span class="p">)</span>
    <span class="n">switchKarabinerProfile</span><span class="p">(</span><span class="n">defaultProfile</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1">-- Watch for iTerm2 focus events</span>
<span class="kd">local</span> <span class="n">appWatcher</span> <span class="o">=</span> <span class="n">hs</span><span class="p">.</span><span class="n">application</span><span class="p">.</span><span class="n">watcher</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">appName</span><span class="p">,</span> <span class="n">eventType</span><span class="p">,</span> <span class="n">app</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">appName</span> <span class="o">==</span> <span class="s2">"iTerm2"</span> <span class="k">then</span>
        <span class="k">if</span> <span class="n">eventType</span> <span class="o">==</span> <span class="n">hs</span><span class="p">.</span><span class="n">application</span><span class="p">.</span><span class="n">watcher</span><span class="p">.</span><span class="n">activated</span> <span class="k">then</span>
            <span class="n">enableFunctionKeys</span><span class="p">()</span>
        <span class="k">elseif</span> <span class="n">eventType</span> <span class="o">==</span> <span class="n">hs</span><span class="p">.</span><span class="n">application</span><span class="p">.</span><span class="n">watcher</span><span class="p">.</span><span class="n">deactivated</span> <span class="k">then</span>
            <span class="n">disableFunctionKeys</span><span class="p">()</span>
        <span class="k">end</span>
    <span class="k">end</span>
<span class="k">end</span><span class="p">)</span>

<span class="c1">-- Start the application watcher</span>
<span class="n">appWatcher</span><span class="p">:</span><span class="n">start</span><span class="p">()</span>

<span class="c1">-- Ensure media keys are enabled when Hammerspoon reloads</span>
<span class="n">disableFunctionKeys</span><span class="p">()</span>
</pre></table></code></div></div><p>This script will automatically detect when iTerm2 becomes the active window and trigger the profile switch in Karabiner-Elements.</p><h2 id="testing-the-setup"><span class="mr-2">Testing the Setup</span><a href="#testing-the-setup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>After configuring both tools, restart Karabiner-Elements and reload the Hammerspoon configuration (click the Hammerspoon icon in the menu bar and choose “<code class="language-plaintext highlighter-rouge">Reload Config</code>”).</p><p>Now, open iTerm2 and press any of the function keys (<code class="language-plaintext highlighter-rouge">F1</code>-<code class="language-plaintext highlighter-rouge">F12</code>). You should notice that they behave like traditional function keys, enabling functionality that’s typically required in a terminal environment. Switch back to any other application, and your function keys will revert to their default macOS behavior– controlling brightness, volume, and other system settings.</p><h2 id="enjoy-seamless-switching"><span class="mr-2">Enjoy Seamless Switching</span><a href="#enjoy-seamless-switching" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="/assets/img/2024/pexels-olly-3931634-min.jpg" class="popup img-link "><img data-src="/assets/img/2024/pexels-olly-3931634-min.jpg" alt="" class="lazyload" data-proofer-ignore></a> <em>Photo credit - <a href="https://www.pexels.com/@olly/">Andrea Piacquadio</a></em></p><p>With everything set up, you can now enjoy the convenience of instantaneous profile switching. The moment iTerm2 comes into focus, your function keys will adjust accordingly, and they’ll seamlessly switch back once you exit iTerm2. The best part is that this setup works quietly in the background– no more manual toggling or hunting through system preferences to make function keys work as needed.</p><h2 id="final-thoughts"><span class="mr-2">Final Thoughts</span><a href="#final-thoughts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>This setup is a testament to how powerful macOS automation can be when you combine the right tools. By leveraging Karabiner-Elements’ flexible key remapping and Hammerspoon’s window management capabilities, you can streamline your workflow in a way that feels truly frictionless. Whether you’re debugging code, managing servers, or switching between multiple terminal sessions, this configuration ensures that your function keys are always optimized for the task at hand.</p><p>In the world of development, these small improvements can make a huge difference. Once you experience the ease of this setup, you’ll wonder how you ever lived without it!</p></div><div class="post-tail-wrapper text-muted"><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Seamless%20Function%20Key%20Switching%20for%20iTerm2%20with%20Karabiner-Elements%20and%20Hammerspoon%20-%20Cal%20Howard&url=https%3A%2F%2Fcalhoward.com%2Fposts%2FFunction-Key-Switching-for-iTerm2%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Seamless%20Function%20Key%20Switching%20for%20iTerm2%20with%20Karabiner-Elements%20and%20Hammerspoon%20-%20Cal%20Howard&u=https%3A%2F%2Fcalhoward.com%2Fposts%2FFunction-Key-Switching-for-iTerm2%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fcalhoward.com%2Fposts%2FFunction-Key-Switching-for-iTerm2%2F&text=Seamless%20Function%20Key%20Switching%20for%20iTerm2%20with%20Karabiner-Elements%20and%20Hammerspoon%20-%20Cal%20Howard" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Taylor_C713_Interface_Board_Fix/">Headbanging: Hacking (fixing) the Taylor 063926-SER Interface Base Board</a><li><a href="/posts/Hacking_Leviton_Fan_Humidity_Switch/">Hacking the Leviton IPHS5-1LW In-Wall Humidity Sensor & Fan Control</a><li><a href="/posts/Backing_up_openMAINT_Database/">Backing up an openMAINT Database with pg_dump</a><li><a href="/posts/Installing_openMAINT_Debian11/">Installing openMAINT 3.4 on Debian 11 "Bullseye"</a><li><a href="/posts/Installing_Hello_Debian11/">Installing GNU Hello on Debian 11</a></ul></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Taylor_C713_Interface_Board_Fix/"><div class="card-body"> <em class="small" data-ts="1657728000" data-df="ll" > Jul 13, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Headbanging: Hacking (fixing) the Taylor 063926-SER Interface Base Board</h3><div class="text-muted small"><p> Pictured - Taylor 063926-SER “Interface Base Board” Introducing: Headbanging This write-up is the first in my new series I’d like to call Headbanging. To kick off the series, join me on a circuit...</p></div></div></a></div><div class="card"> <a href="/posts/Hacking_Leviton_Fan_Humidity_Switch/"><div class="card-body"> <em class="small" data-ts="1652630400" data-df="ll" > May 15, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Hacking the Leviton IPHS5-1LW In-Wall Humidity Sensor & Fan Control</h3><div class="text-muted small"><p> Pictured - The fully disassembled Leviton IPHS5-1LW Introduction DANGER! This guide involves working with high voltage AC wiring. Do not attempt to perform manual wiring on any of the circuit...</p></div></div></a></div><div class="card"> <a href="/posts/Backing_up_openMAINT_Database/"><div class="card-body"> <em class="small" data-ts="1651330080" data-df="ll" > Apr 30, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Backing up an openMAINT Database with pg_dump</h3><div class="text-muted small"><p> Photo credit - panumas nikhomkhai Introduction The information in your openMAINT instance is stored in a PostgreSQL database. It can be simply backed up in the form of a .dump file with a single...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Taylor_C713_Interface_Board_Fix/" class="btn btn-outline-primary" prompt="Older"><p>Headbanging: Hacking (fixing) the Taylor 063926-SER Interface Base Board</p></a><div class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></div></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://twitter.com/calhoward">Cal Howard</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
